# 🤖 Multi-Robot Cooperative SLAM and Autonomous Navigation with Dynamic Obstacle Avoidance

This project develops a multi-robot system for cooperative SLAM and autonomous navigation. It enables a fleet of robots to build a single, shared map by fusing data from their individual LiDAR sensors. The system is designed to handle dynamic obstacles with a predictive approach, allowing the robots to navigate safely in changing environments. 

## 📁 Project Structure

```
.
├── docker_ws/                   # Docker workspace for building the development container
├── ros_ws/                      # Main ROS 2 workspace containing all custom and third-party packages
├── chown_me.sh                  # Script to fix ownership of files created as root inside the container
├── run.sh                       # Script to run the Docker container with correct volumes and permissions
├── exec.sh                      # Script to open a shell into a running container
```

### `ros_ws/src` contains:

#### `turtlebot3_gazebo`
- Cloned and adapted from [ROBOTIS-GIT/turtlebot3_simulations](https://github.com/ROBOTIS-GIT/turtlebot3_simulations).
- Includes robot models, worlds and parameters files for simulation.

**Modifications:**
- Added a custom simulation world `turtlebot3_dynamic_obstacles.world` with a walking pedestrian actor in the `worlds/` directory.
- `turtlebot3_burger_bridge.yaml` adapted to disable /clock topic bridging. A dedicated, single bridge instance is launched in `multi_robot_bringup/tb3_world.launch.py` to publish `/clock` from Gazebo to ROS 2. This ensures consistent simulation time across the entire ROS2 system while supporting multiple robot instances with their own bridges.

#### `multi_robot_bringup` 
- Custom pkg that includes launch files to handle multiple robots simulation.

```
multi_robot_bringup/
├── config/                     # Configuration file for robots
│   └── robots.yaml
├── launch/                 
│   ├── tb3_nav2.launch.py      # Main launch file for autonomous navigation
│   └── tb3_world.launch.py     # Main launch file for simulation world
├── map/
│   ├── map.pgm                 # Grayscale grid map of the environment
│   ├── map.yaml                # Map's metadata file
│   ├── map2.pgm                # Grayscale grid map of the environment
│   └── map2.yaml               # Map's metadata file
├── multi_robot_bringup/
│   └── __init__.py             # Marks the folder as a Python package
├── multi_robot_scripts/
│   ├── __init__.py             # Marks the folder as a Python package
│   └── utils.py                # Utility functions for the simulation
├── params/                     # RViz2 configuration template
│   └── burger_nav2_params.yaml # Nav2 parameters template
├── resource/                   # Auto-generated by ROS 2; used for resource indexing
├── rviz/                       
│   └── tb3_navigation2.rviz    # RViz2 configuration template
├── test/                       # Default folder for test files (currently unused)
├── package.xml                 # Package metadata and dependencies
├── setup.cfg                   # Makes package discoverable by ros2 run
└── setup.py                    # Installation script
```

## 🐳 How to Setup the Workspace and Run the Simulation via Docker

### 1. Clone the Repository and Build the Docker Image

```bash
git clone https://github.com/christian-ronchi/Multi-Robot-Autonomous-Navigation.git
cd docker_ws
chmod +x build.sh
./build.sh
```

Ensure scripts are executable:
```bash
cd ..
chmod +x run.sh exec.sh chown_me.sh
```

### 2. Run the Docker Container

```bash
./run.sh
```

### 3. Inside the Container

Run the following commands:

```bash
colcon build
source install/setup.bash
```

### 4. Launch the Gazebo Simulation 

```bash
ros2 launch multi_robot_bringup tb3_world.launch.py
```

### 4. Launch Nav2 Stack and RViz2 Simulation 

Open a new terminal and run the following commands: 

```bash
./exex.sh
source install/setup.bash
ros2 launch multi_robot_bringup tb3_world.launch.py
```

## 🌍 Switching Simulation Environments

To change the simulated world:
```
# Sobstitute with the path to your world file
ros2 launch multi_robot_bringup tb3_world.launch.py world:=/path/to/your/world.world

# Sobstitute with the path to your map file
ros2 launch multi_robot_bringup tb3_nav2.launch.py map:=/path/to/your/map.yaml
```


## ⚙️ Robot Configuration 

The placement and activation of individual robots are defined in the config/robots.yaml file. Each robot is assigned a unique name and initial position. Set the enabled flag to true to include a robot in the simulation or false to exclude it.

Below is an example configuration used in the Nav2 simulation:

```
robots:
  - name: tb1
    x_pose: "0.5"
    y_pose: "-0.5"
    z_pose: 0.01
    enabled: true
  - name: tb2
    x_pose: "-1.5"
    y_pose: "0.5"
    z_pose: 0.01
    enabled: false
  - name: tb3
    x_pose: "-0.5"
    y_pose: "-0.5"
    z_pose: 0.01
    enabled: true
  - name: tb4
    x_pose: "1.5"
    y_pose: "0.5"
    z_pose: 0.01
    enabled: false
```
💡 Robots can be enabled or disabled by updating the enabled field, and their starting poses can be configured by modifying the position values accordingly.

